function __ps1_errs() {
  local err=$?
  if [ "$err" != "0" ]
  then
    echo -e "\a" #bell
    echo -e "⇒ E$err" # print err in red
  fi
}

function __terminal_title() {
  pwd | sed "s|$HOME|~|"
}


function __vpn_status () {
  type vpn_is_connected &> /dev/null || return #ensure function is defined
  vpn_is_connected && (echo 🍃; bar white 29999) || (echo 🚫; bar black 29999)
}

PS1=""
PS1="$PS1"'\[\033]0;$(__terminal_title)\007\]' # set window title
PS1="$PS1"'$(__ps1_errs)\n' # show exit code
if test -z "$WINELOADERNOEXEC"
then
  PS1="$PS1"'\[\033[32m\]'       # change color
  PS1="$PS1"'$(__git_ps1 "%s") '   # bash function
fi
PS1="$PS1"'\[\033[33m\]'       # change color
PS1="$PS1"'\w'                 # current working directory
PS1="$PS1"'\[\033[0m\]'        # change color
PS1="$PS1"' $(__vpn_status) \n'                 # new line
PS1="$PS1"'$(date +%l:%M)> '                 # prompt
